(function(a){function b(f){var g=a.document.getElementsByClassName("vx");for(var j=0;j<g.length;j++){c(f,g[j]);}g=a.document.getElementsByTagName("vx");for(var j=0;j<g.length;j++){c(f,g[j]);}}function c(g,h){if(h.dataset)var i=h.dataset.vx;else h.dataset={};if(!i)h.dataset.vx=i={};Array.prototype.forEach.call(h.attributes,function(m){if(m.specified){if(m.name.substr(0,3)=="vx-"){var n=m.name.substr(3);var o=m.value.match(/\{\{([^\}]*)\}\}/g)||[];o.forEach(function(p,q){var r=[];p=p.replace(/(?:([a-zA-Z]\w*))|(?:\"[^\"]*\")|(?:\'[^\"]*\')/g,function(t,u){if(u){r.push(u);return"page.data."+u;}else return t;});p=a.eval("(function(page){ return "+p+"})");var s=function(){var u=p(g);h.attr(n,u);};r.forEach(function(v,w){var x=i["vx-data-"+v];if(x==null){i["vx-data-"+v]=x=[];h.addClass("vx-data-"+v);}x.push(s);});s();});}}});if(tagName=="VX"){if(i.content==null)i.content=that.innerText.trim();if(i.content.substr(0,2)=="{{"&&i.content.substr(i.content.length-2)=="}}"){var j=[];var k=i.content.substr(2,i.content.length-4).replace(/(?:([a-zA-Z]\w*))|(?:\"[^\"]*\")|(?:\'[^\"]*\')/g,function(n,o){if(o){j.push(o);return"page.data."+o;}else return n;});k=a.eval("(function(page){ return "+k+"})");var l=function(){that.innerText=k(g);};j.forEach(function(p,q){var r=i["vx-data-"+p];if(r==null){i["vx-data-"+p]=r=[];h.addClass("vx-data-"+p);}r.push(l);});l();}}h.removeClass("vx");}function d(h,i,j){h.data[i]=j;var k="vx-data-"+i;var l=a.document.getElementsByClassName(k);Array.prototype.forEach.call(l,function(m){var n=(m.dataset&&m.dataset.vx)||{};var o=n[k]||[];for(var p=0;p<o.length;p++){o[p]();}});}function e(i){var j=this;j.data={};a.Object.assign(j,i);if(i.observers){j.observers={};for(var k in i.observers){(function(){var l=i.observers[k],m=k.split(",");var n=function(){var s=[];for(var t=0;t<m.length;t++){s.push(j.data[q]);}l.apply(j,s);};for(var p=0;p<m.length;p++){var q=m[p]=m[p].trim();var r=j.observers[q];if(!r)r=j.observers[q]=[];r.push(n);}})();}}}e.prototype={setData:function(j,k){var l=this;switch(arguments.length){case 1:for(var o in j)d(l,o,j[o]);if(l.observers){var s=[];for(var o in j){var p=l.observers[o];if(p)for(var t=0;t<p.length;t++)s.push(p[t]);}s.distinct();for(var t=0;t<s.length;t++)s[t]();}break;case 2:d(l,j,k);if(l.observers){var s=l.observers[j];if(s){for(var t=0;t<s.length;t++)s[t]();}}break;}}};a.Page=function(k){var l=k.onShow||function(){};var m=k.onHide||function(){};k.onShow=function(){if(k.servicePath!=null)a.require("/api/service.js").set(k.servicePath,this);l.call(this);};k.onHide=function(){if(k.servicePath!=null)a.require("/api/service.js").set(k.servicePath,null);m.call(this);};var n=new e(k);a.document.addEventListener("DOMContentLoaded",function(){b(n);if(n.onLoad)n.onLoad();if(n.onShow)n.onShow();});};})(window);