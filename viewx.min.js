(function(a){function b(f){var g=a.document.getElementsByClassName("vx");for(var j=0;j<g.length;j++){c(f,g[j]);}g=a.document.getElementsByTagName("vx");for(var j=0;j<g.length;j++){c(f,g[j]);}}function c(g,h){var i=a.$(h),j=h.tagName.toUpperCase();var k=i.data().vx;if(k==null)i.data().vx=k={};a.$.each(h.attribute,function(){var o=h;if(o.specified){if(o.name.substr(0,3)=="vx-"){var p=o.name.substr(3);var q=o.value.match(/\{\{([^\}]*)\}\}/g)||[];q.forEach(function(r,s){var t=[];r=r.replace(/(?:([a-zA-Z]\w*))|(?:\"[^\"]*\")|(?:\'[^\"]*\')/g,function(v,w){if(w){t.push(w);return"page.data."+w;}else return v;});r=a.eval("(function(page){ return "+r+"})");var u=function(){var w=r(g);i.attr(p,w);};t.forEach(function(x,y){var z=k["vx-data-"+x];if(z==null){k["vx-data-"+x]=z=[];i.addClass("vx-data-"+x);}z.push(u);});u();});}}});if(j=="VX"){if(k.content==null)k.content=h.innerText.trim();if(k.content.substr(0,2)=="{{"&&k.content.substr(k.content.length-2)=="}}"){var l=[];var m=k.content.substr(2,k.content.length-4).replace(/(?:([a-zA-Z]\w*))|(?:\"[^\"]*\")|(?:\'[^\"]*\')/g,function(p,q){if(q){l.push(q);return"page.data."+q;}else return p;});m=a.eval("(function(page){ return "+m+"})");var n=function(){h.innerText=m(g);};l.forEach(function(r,s){var t=k["vx-data-"+r];if(t==null){k["vx-data-"+r]=t=[];i.addClass("vx-data-"+r);}t.push(n);});n();}}i.removeClass("vx");}function d(h,i,j){h.data[i]=j;var k="vx-data-"+i;var l=a.document.getElementsByClassName(k);a.$.each(l,function(){var m=a.$(this);var n=m.data().vx||{};var o=n[k]||[];for(var p=0;p<o.length;p++){o[p]();}});}function e(i){var j=this;j.data={};a.$.extend(j,i);if(i.observers){j.observers={};for(var k in i.observers){var l=i.observers[k],m=k.split(",");var n=function(){var s=[];for(var t=0;t<m.length;t++){s.push(j.data[q]);}l.apply(j,s);};for(var p=0;p<m.length;p++){var q=m[p]=m[p].trim();var r=j.observers[q];if(!r)r=j.observers[q]=[];r.push(n);}}}}e.prototype={setData:function(j,k){var l=this;switch(arguments.length){case 1:for(var o in j)d(l,o,j[o]);if(l.observers){var s=[];for(var o in j){var p=l.observers[o];if(p)for(var t=0;t<p.length;t++)s.push(p[t]);}s.distinct();for(var t=0;t<s.length;t++)s[t]();}break;case 2:d(l,j,k);if(l.observers){var s=l.observers[j];if(s){for(var t=0;t<s.length;t++)s[t]();}}break;}}};a.Page=function(k){var l=k.onShow||function(){};var m=k.onHide||function(){};k.onShow=function(){if(k.servicePath!=null)a.require("/api/service.js").set(k.servicePath,this);l.call(this);};k.onHide=function(){if(k.servicePath!=null)a.require("/api/service.js").set(k.servicePath,null);m.call(this);};var n=new e(k);a.$(a.document).ready(function(){b(n);if(n.onLoad)n.onLoad();if(n.onShow)n.onShow();});};})(window);