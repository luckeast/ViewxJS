(function(a){document.createElement("vx");function b(o,p,q){var r=q||p;var s=p.parentNode;if(q){for(var t=0;t<p.attributes.length;t++){var u=p.attributes[t];q.setAttribute(u.name,u.value);}q.innerHTML=p.innerHTML;s.replaceChild(q,p);}var v=r.vxData||(r.vxData={});Array.prototype.forEach.call(r.attributes,function(y){if(y.specified){if(y.name.substr(0,3)=="vx-"){var z=y.name.substr(3);switch(z){case"if":r.vxType=1;if(!r.vxTemplate){r.setAttribute("template","...");r.vxTemplate=r.innerHTML;}break;case"for":r.vxType=2;s.innerHTML="";if(!s.vxTemplate){s.setAttribute("template","...");s.vxTemplate=r;}break;}var A=function(){var C=B.map(function(G){return G();});if(C.length<2)C=C[0];else C=C.join("");switch(z){case"if":if(v[z]!=C){v[z]=C;console.log(C);if(C)r.innerHTML=r.vxTemplate;else r.innerHTML="";k(o);}break;case"for":s.innerHTML="";v[z]=C;if(C){var D=document.createDocumentFragment();for(var E=0;E<C.length;E++){var F=f(r);F.removeAttribute("vx-for");F.vxForIndex=E;F.vxForItem=C[E];F.vxType=2;D.appendChild(F);}s.appendChild(D,r);k(o);}break;case"template":r.innerHTML=C;k(o);break;default:r.setAttribute(z,C);break;}};var B=[];y.value.match(/(?:\{\{([^\}]*)\}\})|((?:[^{]+|\{))/g).forEach(function(D){if(D.indexOf("{{")>=0){B.push(c(o,r,D,A));}else{B.push(function(){return D;});}});A();}}});if(q){if(r.vxInnerText==null)r.vxInnerText=r.innerText.trim();if(r.vxInnerText.substr(0,2)=="{{"&&r.vxInnerText.substr(r.vxInnerText.length-2)=="}}"){var w=function(){r.innerText=x(o,r);};var x=c(o,r,r.vxInnerText,w);w();}else throw r.vxInnerText;}i(r,"vx");}function c(p,q,r,s){var t=r.substr(2,r.length-4).replace(/(?:([a-zA-Z][\w\.\[\]0-9]*))|(?:\"[^\"]*\")|(?:\'[^\"]*\')/g,function(u,v){if(v){var w=v.split(".");var x=d(q);var y=x[w[0]];if(y===undefined){var z=q.vxData||(q.vxData={});var A=z["vx-data-"+v];if(A==null){z["vx-data-"+v]=A=[];h(q,"vx-data-"+v);}A.push(s);}return'fn("'+v+'")';}else return u;});t=a.eval("0||function(fn){ return "+t+"}");return function(){return t(function(v){var w=v.split(".");var x=d(q);var y=x[w[0]];if(y!==undefined)return e(y(),w,1);else return e(p.data,w,0);});};}function d(q){if(q){if(q.vxCs==j.cs){return q.vxScope;}else{q.vxCs=j.cs;if(q.tagName!="HTML"){if(q.vxType!=2){return q.vxScope=d(q.parentNode);}else{var r=q.vxScope=Object.assign({},d(q.parentNode));var s=q.getAttribute("for-item")||"item";var t=q.getAttribute("for-index")||"index";r[s]=function(){return q.vxForItem;};r[t]=function(){return q.vxForIndex;};return r;}}else{return q.vxScope||(q.vxScope={});}}}else return{};}function e(r,s,t){for(var u=t;u<s.length;u++){if(r==null)return null;r=r[s[u]];}return r;}function f(s){var t=s.cloneNode();for(var u=0;u<s.childNodes.length;u++){t.appendChild(f(s.childNodes[u]));}return t;}function g(t,u){return t.className.match(new RegExp('(\s|^)'+u+'(\s|$)'));}function h(u,v){if(u.classList)u.classList.add(v);else if(!g(u,v))u.className+=" "+v;}function i(v,w){if(v.classList)v.classList.remove(w);else if(g(v,w)){var x=new RegExp('(\s|^)'+w+'(\s|$)');v.className=v.className.replace(x,' ');}}var j=a.vx=function(){k(n);};function k(x){if(j.ci)return;j.ci=true;j.cs=(j.cs||0)+1;try{while(true){var z=a.document.getElementsByClassName("vx")[0];if(z){b(x,z);}else break;}while(true){var z=a.document.getElementsByTagName("vx")[0];if(z){b(x,z,document.createElement("span"));}else break;}}finally{j.ci=false;}}function l(y){var z=this;z.data={};a.Object.assign(z,y);if(y.observers){z.observers={};for(var A in y.observers){(function(){var B=y.observers[A],C=A.split(",");var D=function(){var H=[];for(var I=0;I<C.length;I++){H.push(z.data[F]);}B.apply(z,H);};for(var E=0;E<C.length;E++){var F=C[E]=C[E].trim();var G=z.observers[F];if(!G)G=z.observers[F]=[];G.push(D);}})();}}}l.prototype={setData:function(z,A){var B=this;switch(arguments.length){case 1:for(var E in z)m(B,E,z[E]);if(B.observers){var I=[];for(var E in z){var F=B.observers[E];if(F)for(var J=0;J<F.length;J++)I.push(F[J]);}I.distinct();for(var J=0;J<I.length;J++)I[J]();}break;case 2:m(B,z,A);if(B.observers){var I=B.observers[z];if(I){for(var J=0;J<I.length;J++)I[J]();}}break;}}};function m(A,B,C){A.data[B]=C;var D="vx-data-"+B;var E=a.document.getElementsByClassName(D);Array.prototype.forEach.call(E,function(F){var G=F.vxData||(F.vxData={});var H=G[D]||[];for(var I=0;I<H.length;I++){H[I]();}});}var n;a.Page=function(B){var C=B.onShow||function(){};var D=B.onHide||function(){};B.onShow=function(){if(B.servicePath!=null)a.require("/api/service.js").set(B.servicePath,this);C.call(this);};B.onHide=function(){if(B.servicePath!=null)a.require("/api/service.js").set(B.servicePath,null);D.call(this);};if(n)throw"Page created";n=new l(B);a.document.addEventListener("DOMContentLoaded",function(){k(n);if(n.onLoad)n.onLoad();if(n.onShow)n.onShow();});};})(window);